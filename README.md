# bsbench
This is the data branch for the bsbench project. The data in this branch is auto-generated by a CI/CD process. You should not be manually editing this repository.

The data organized in the following structure:
- `data/` - the root folder where all data is stored
    - `[date]/` - the date the benchmarks were run, in the format `yyyy-mm-dd` (i.e. `2024-07-18`)
        - `[suiteKey]/` - the name of the benchmark suite, sanitized for use in URLs. (i.e. `add-vs-increment`)
            - `[uniqueDeviceIdentifier].json` - this is a unique identifier for this device that we define when allocating a Roku to the benchmark suite. This file contains the actual final benchmark results. (i.e. `4620x.json`)

Putting that all together, here are some examples:
- `data/2024-07-18.....`

Each json file has the following structure. Here's a sample:

```typescript
interface BenchmarkSuiteResult {
    /**
     * The exact date we produced this file
     */
    date: Date;
    /**
     * Key for this suite (derived from the title, also same as one of the folder names)
     */
    suiteKey: string;
    /**
     * The title of the suite.
     */
    title: string;
    /**
     * The description of the benchmark. May be empty, and can contain markdown.
     */
    description?: string;
    /**
     * The body of any `setup` function for this suite, which is not included in the benchmark timings
     */
    setupCode?: string;
    /**
     * The body of any `teardown` function for this suite, which is not included in the benchmark timings
     */
    teardownCode?: string;
    /**
     * Model number of the device this suite was run on
     */
    modelNumber: string;
    /**
     * The version of the RokuOS this suite was run on
     */
    softwareVersion: string;
    /**
     * The build number of the OS this suite was run on.
     */
    softwareBuild: string;
    /**
     * The list of tests
     */
    tests: Array<{
        /**
         * Key for this test
         */
        testKey: string;
        /**
         * The name of this test
         */
        name: string;
        /**
         * The description of this test. Can contain markdown
         */
        description?: string;
        /**
         * Setup code defined just for this test, which is not included in the benchmark timings
         */
        setupCode?: string;
        /**
         * The code for this test. This is what is timed
         */
        code: string;
        /**
         * Teardown code defined just for this test, which is not included in the benchmark timings
         */
        teardownCode?: string;
        /**
         * The list of samples run for this suite
         */
        samples: Array<{
            /**
             * The number of iterations that will be run for the testing loop
             */
            iterations: number;
            /**
             * The number of milliseconds this sample was supposed to run for
             */
            targetDuration: number;
            /**
             * Time the test start (in unix epoch milliseconds)
             */
            startTime: number;
            /**
             * Time the test start (in unix epoch milliseconds)
             */
            endTime: number;
        }>
    }>;
}
```

Here's an example:
```jsonc
{
    "date": 1721334219,
    "suiteKey": "add-vs-increment",
    "title": "Add vs. Increment",
    "description": "Determine whether adding a value faster than using the ++ operator?",
    "setupCode": "value = 1",
    "teardownCode": "value = invalid",
    "modelNumber": "4620x",
    "softwareVersion": "13.0.0",
    "softwareBuild": "24056",
    "tests": [{
        "testKey": "add",
        "name": "Add",
        "description": "Add values using normal + operator",
        "setupCode": null,
        "code": "value = value + 1",
        "teardownCode: null,
        samples": [{
            "iterations": 1521975,
            "targetDuration": 500,
            "startTime": 1721334319,
            "endTime": 1721334817
        },{"
            iterations": 1521975,
            "targetDuration": 500,
            "startTime": 1721334818,
            "endTime": 1721334318
        }]
    }, {
        "testKey": "increment",
        "name": "Increment",
        "description": "Increment value using ++ operator",
        "setupCode": null,
        "code": "value++",
        "teardownCode": null,
        "samples": [{
            "iterations": 1531881,
            "targetDuration": 500,
            "startTime": 1721334653,
            "endTime": 1721334156
        },{
            "iterations": 1531881,
            "targetDuration": 500,
            "startTime": 1721334157,
            "endTime": 1721334660
        }]
    }]
}
```
